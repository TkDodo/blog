@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@font-face {
	font-family: 'Inter';
	src: url('/fonts/Inter.woff2') format('woff2');
	font-display: swap;
}

@theme {
	--font-sans: 'Inter', system-ui, -apple-system, sans-serif;

	/* Theme UI compatible color vars from the previous Gatsby theme */
	--theme-ui-colors-background: #ffffff;
	--theme-ui-colors-text: #1f2937;
	--theme-ui-colors-textMuted: #6b7280;
	--theme-ui-colors-primary: #387d6c;
	--theme-ui-colors-secondary: #6b7280;
	--theme-ui-colors-backgroundSecondary: #f3f4f6;
	--theme-ui-colors-backgroundTertiary: #e5e7eb;
	--theme-ui-colors-twitterBlue: #1d9bf0;
	--theme-ui-colors-twitterPollBg: rgb(207, 217, 222);
	--theme-ui-colors-twitterPollBgWinner: rgba(29, 155, 240, 0.58);
	--theme-ui-colors-danger: #e03131;
	--theme-ui-colors-warning: #f08c00;

	--color-bg: var(--theme-ui-colors-background);
	--color-text: var(--theme-ui-colors-text);
	--color-highlight: var(--theme-ui-colors-text);
	--color-primary: var(--theme-ui-colors-primary);
	--color-subtle: var(--theme-ui-colors-secondary);
	--color-faded: var(--theme-ui-colors-textMuted);
	--color-border: var(--theme-ui-colors-backgroundSecondary);

	--color-ic-bg: var(--theme-ui-colors-backgroundSecondary);
	--color-ic-border: var(--theme-ui-colors-backgroundTertiary);
}

@layer theme {
	:root {
		@variant dark {
			--theme-ui-colors-background: #111827;
			--theme-ui-colors-text: #f3f4f6;
			--theme-ui-colors-textMuted: #9ca3af;
			--theme-ui-colors-primary: #76c2af;
			--theme-ui-colors-secondary: #9ca3af;
			--theme-ui-colors-backgroundSecondary: #1f2937;
			--theme-ui-colors-backgroundTertiary: #374151;
			--theme-ui-colors-danger: #ff6b6b;
			--theme-ui-colors-warning: #ffd43b;
			--theme-ui-colors-twitterPollBg: rgb(51, 54, 57);

			--color-bg: var(--theme-ui-colors-background);
			--color-text: var(--theme-ui-colors-text);
			--color-highlight: var(--theme-ui-colors-text);
			--color-primary: var(--theme-ui-colors-primary);
			--color-subtle: var(--theme-ui-colors-secondary);
			--color-faded: var(--theme-ui-colors-textMuted);
			--color-border: var(--theme-ui-colors-backgroundSecondary);

			--color-ic-bg: var(--theme-ui-colors-backgroundSecondary);
			--color-ic-border: var(--theme-ui-colors-backgroundTertiary);
		}
	}
}

@utility container {
	margin-inline: auto;
	padding-inline: 1rem;

	@media (width >= --theme(--breakpoint-sm)) {
		padding-inline: 2rem;
	}

	@media (width >= --theme(--breakpoint-md)) {
		padding-inline: 2rem;
	}

	@media (width >= --theme(--breakpoint-lg)) {
		max-width: var(--container-5xl);
	}

	@media (width >= --theme(--breakpoint-xl)) {
	}

	@media (width >= --theme(--breakpoint-2xl)) {
	}
}

@custom-variant prose-inline-code {
	&.prose :where(:not(pre) > code):not(:where([class~='not-prose'] *)) {
		@slot;
	}
}

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* Custom styles */

a.active {
	color: var(--color-highlight);
}

#search {
	--search-cancel-space: calc(var(--spacing) * 20);
}

#search .pagefind-ui__form::before {
	opacity: 1;
}

#search .pagefind-ui__search-input {
	width: calc(100% - var(--search-cancel-space));
}

#search .pagefind-ui__search-input::placeholder {
	color: var(--color-highlight);
	font-weight: 400;
	letter-spacing: normal;
}

@media (width >= --theme(--breakpoint-sm)) {
	#search {
		--search-cancel-space: 0px;
	}
}

.markdown-heading {
	position: relative;
}

.markdown-heading:hover .anchor {
	visibility: visible;
}

.markdown-heading .anchor {
	position: absolute;
	display: flex;
	margin: auto;
	opacity: 1;
	justify-content: center;
	align-items: center;
	width: calc(var(--spacing) * 10);
	height: calc(var(--spacing) * 7);
	top: 50%;
	padding-right: calc(var(--spacing) * 4);
	left: calc(-9 * var(--spacing));
	transform: translateY(calc(-50% + 0.1rem));
	transition: opacity 0.2s ease-in-out;
	visibility: hidden;
}

.markdown-heading .anchor .anchor-icon {
	display: inline-block;
	overflow: visible !important;
	vertical-align: text-bottom;
	fill: currentColor;
	height: calc(var(--spacing) * 5);
	width: calc(var(--spacing) * 5);
}

/* Theme select styling */
select {
	background-color: var(--color-bg);
	color: var(--color-text);
}

select option {
	background-color: var(--color-bg);
	color: var(--color-text);
}
